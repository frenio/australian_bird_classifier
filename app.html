---
title: bird classifier
layout: page
---

<div id="results"></div>
<input type="file" id="imageUpload" accept="image/*">

<script>
  document.getElementById('imageUpload').addEventListener('change', function() {
    var reader = new FileReader();
    reader.onloadend = async function() {
      try {
        const base64data = reader.result;

        // Now use this data to send to your API
        const response = await fetch('https://frenio-australian-bird-classifier.hf.space/run/predict', {
          method: "POST",
          body: JSON.stringify({ "data": [base64data] }),
          headers: { "Content-Type": "application/json" }
        });

        const json = await response.json();
        const label = json['data'][0]['confidences'][0]['label'];
        document.getElementById('results').innerHTML = `<br/><img src="${base64data}" width="300"> <p>${label}</p>`;
      } catch (error) {
        document.getElementById('results').innerHTML = `API error: ${error}`;
      }
    }

    reader.onerror = function (error) {
      document.getElementById('results').innerHTML = `Image load error: ${error}`;
    };

    // This will convert the uploaded image file to base64
    reader.readAsDataURL(this.files[0]);
  });
</script>
